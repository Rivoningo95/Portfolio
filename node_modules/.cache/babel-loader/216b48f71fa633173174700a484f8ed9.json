{"ast":null,"code":"import _regeneratorRuntime from \"/Users/da_m1_44/Portfolio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/da_m1_44/Portfolio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/da_m1_44/Portfolio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"/Users/da_m1_44/Portfolio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState, useCallback, useEffect } from 'react';\nimport Calendar, { Skeleton } from 'react-activity-calendar';\nexport { createCalendarTheme } from 'react-activity-calendar';\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\n// GitHub theme\nvar API_URL = 'https://github-contributions-api.jogruber.de/v4/';\nvar DEFAULT_THEME = {\n  level4: '#216e39',\n  level3: '#30a14e',\n  level2: '#40c463',\n  level1: '#9be9a8',\n  level0: '#ebedf0'\n};\nvar transformData = function transformData(data, transformFn) {\n  if (typeof transformFn !== 'function') {\n    return data;\n  }\n  var transformedData = transformFn(data);\n  if (!Array.isArray(transformedData)) {\n    throw new Error(\"Passed function transformData must return a list of Day objects.\");\n  }\n  if (transformedData.length > 0) {\n    var testObj = transformedData[0];\n    if (typeof testObj.count !== 'number' || testObj.count < 0) {\n      throw new Error(\"Required property \\\"count: number\\\" missing or invalid. Got: \".concat(testObj.count));\n    }\n    if (typeof testObj.date !== 'string' || !/(\\d{4})-(\\d{2})-(\\d{2})/.test(testObj.date)) {\n      throw new Error(\"Required property \\\"date: YYYY-MM-DD\\\" missing or invalid. Got: \".concat(testObj.date));\n    }\n    if (typeof testObj.level !== 'number' || testObj.level < 0 || testObj.level > 4) {\n      throw new Error(\"Required property \\\"level: 0 | 1 | 2 | 3 | 4\\\" missing or invalid: Got: \".concat(testObj.level, \".\"));\n    }\n  }\n  return transformedData;\n};\nfunction fetchCalendarData(_x, _x2) {\n  return _fetchCalendarData.apply(this, arguments);\n}\nfunction _fetchCalendarData() {\n  _fetchCalendarData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(username, year) {\n    var response, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(\"\".concat(API_URL).concat(username, \"?y=\").concat(year));\n          case 2:\n            response = _context.sent;\n            _context.next = 5;\n            return response.json();\n          case 5:\n            data = _context.sent;\n            if (response.ok) {\n              _context.next = 8;\n              break;\n            }\n            throw new Error(data.error);\n          case 8:\n            return _context.abrupt(\"return\", data);\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchCalendarData.apply(this, arguments);\n}\nvar GitHubCalendar = function GitHubCalendar(_ref) {\n  var _props$theme;\n  var username = _ref.username,\n    _ref$year = _ref.year,\n    year = _ref$year === void 0 ? 'last' : _ref$year,\n    transformDataProp = _ref.transformData,\n    props = _objectWithoutProperties(_ref, [\"username\", \"year\", \"transformData\"]);\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var transformDataCallback = useCallback(function (contributions) {\n    return transformData(contributions, transformDataProp);\n  }, [transformDataProp]);\n  var fetchData = useCallback(function () {\n    setLoading(true);\n    setError(null);\n    fetchCalendarData(username, year).then(function (_ref2) {\n      var contributions = _ref2.contributions;\n      return setData(transformDataCallback(contributions));\n    }).catch(setError).finally(function () {\n      return setLoading(false);\n    });\n  }, [username, year, transformDataCallback]);\n  useEffect(fetchData, [fetchData]);\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"i\", null, \"Unable to fetch contribution data. See console.\"));\n  }\n  if (loading || !data) {\n    return /*#__PURE__*/React.createElement(Skeleton, _extends({}, props, {\n      loading: true\n    }));\n  }\n  var theme = props.color ? undefined : (_props$theme = props.theme) !== null && _props$theme !== void 0 ? _props$theme : DEFAULT_THEME;\n  var labels = {\n    totalCount: \"{{count}} contributions in \".concat(year === 'last' ? 'the last year' : '{{year}}')\n  };\n  return /*#__PURE__*/React.createElement(Calendar, _extends({\n    data: data,\n    theme: theme,\n    labels: labels\n  }, props));\n};\nexport { GitHubCalendar as default };","map":null,"metadata":{},"sourceType":"module"}